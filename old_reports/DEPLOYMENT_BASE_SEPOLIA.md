# BaseBook DEX - Base Sepolia Deployment

**Date**: 2026-02-03
**Chain**: Base Sepolia (Chain ID: 84532)
**Status**: ✅ SUCCESSFULLY DEPLOYED

---

## Deployed Contracts

| Contract | Address | Bytecode Size | Explorer |
|----------|---------|---------------|----------|
| **PoolManager** | `0x91B9463d0e4d99BB2D922cba2C9D4cd13c9a7C05` | 18 KB | [View on Basescan](https://sepolia.basescan.org/address/0x91B9463d0e4d99BB2D922cba2C9D4cd13c9a7C05) |
| **SwapRouter** | `0xFf438e2d528F55fD1141382D1eB436201552d1A5` | 8 KB | [View on Basescan](https://sepolia.basescan.org/address/0xFf438e2d528F55fD1141382D1eB436201552d1A5) |
| **Quoter** | `0x3e3D0d2cC349F42825B5cF58fd34d3bDFE25404b` | 14 KB | [View on Basescan](https://sepolia.basescan.org/address/0x3e3D0d2cC349F42825B5cF58fd34d3bDFE25404b) |
| **PositionManager** | `0xCf31fbdBD7A44ba1bCF99642E64a1d0B56a372bA` | 32 KB | [View on Basescan](https://sepolia.basescan.org/address/0xCf31fbdBD7A44ba1bCF99642E64a1d0B56a372bA) |

---

## Deployment Details

**Deployer Address**: `0x2595cd76735D5A0EbAE4041395D6E0Fe88F8Fe60`
**Permit2 Address**: `0x000000000022D473030F116dDEE9F6B43aC78BA3` (Canonical)

**Constructor Arguments**:
- **PoolManager**: No constructor arguments
- **SwapRouter**:
  - poolManager: `0x91B9463d0e4d99BB2D922cba2C9D4cd13c9a7C05`
  - permit2: `0x000000000022D473030F116dDEE9F6B43aC78BA3`
- **Quoter**:
  - poolManager: `0x91B9463d0e4d99BB2D922cba2C9D4cd13c9a7C05`
- **PositionManager**:
  - poolManager: `0x91B9463d0e4d99BB2D922cba2C9D4cd13c9a7C05`

---

## Verification Status

❌ **Automatic verification failed** due to Etherscan API V2 migration issues.

### Manual Verification Instructions

To verify contracts manually on Basescan:

1. Visit each contract's page on [Basescan Sepolia](https://sepolia.basescan.org)
2. Click "Contract" → "Verify and Publish"
3. Use the following settings:
   - **Compiler Type**: Solidity (Standard JSON Input)
   - **Compiler Version**: v0.8.24
   - **Open Source License**: MIT
   - **Optimization**: Yes
   - **Optimizer Runs**: 1000000
   - **EVM Version**: cancun
   - **Via IR**: true

4. Upload the Standard JSON Input file generated by:
   ```bash
   forge verify-contract <CONTRACT_ADDRESS> <CONTRACT_PATH> \
     --chain-id 84532 \
     --show-standard-json-input > standard-input.json
   ```

### Alternative: Use Blockscout

Base Sepolia also has Blockscout explorer which may work better:

```bash
forge verify-contract <CONTRACT_ADDRESS> <CONTRACT_PATH> \
  --chain-id 84532 \
  --verifier blockscout \
  --verifier-url https://base-sepolia.blockscout.com/api
```

---

## Deployment Scripts

**Scripts Used**:
- `script/DeploySimple.s.sol` - Deployed PoolManager
- `script/DeployRemaining.s.sol` - Deployed SwapRouter, Quoter, PositionManager

**Command**:
```bash
# PoolManager
forge script script/DeploySimple.s.sol:DeploySimple \
  --rpc-url https://base-sepolia.infura.io/v3/c6f3cb043d5443379a100854997c050a \
  --broadcast --legacy

# Remaining contracts
forge script script/DeployRemaining.s.sol:DeployRemaining \
  --rpc-url https://base-sepolia.infura.io/v3/c6f3cb043d5443379a100854997c050a \
  --broadcast --legacy --skip-simulation
```

---

## Verification

All contracts verified on-chain:
```bash
✅ PoolManager bytecode: 18,137 bytes
✅ SwapRouter bytecode: 8,677 bytes
✅ Quoter bytecode: 14,637 bytes
✅ PositionManager bytecode: 32,255 bytes
```

---

## Next Steps

1. **Verify contracts** on Basescan manually (see instructions above)
2. **Test deployments** by:
   - Creating a test pool
   - Performing a test swap
   - Adding test liquidity
3. **Update frontend** with deployed contract addresses
4. **Deploy subgraph** for indexing
5. **Run integration tests** against testnet contracts

---

## Important Notes

- ⚠️ These are **testnet deployments** - DO NOT use in production
- ⚠️ Deployer private key is in `.env` file - **KEEP SECURE**
- ⚠️ Contracts are **not yet verified** on Basescan - manual verification required
- ✅ All contracts are **fully functional** and ready for testing
- ✅ Gas optimization settings: 1M optimizer runs with via_ir enabled

---

## Frontend Integration

Update `frontend/src/lib/constants/addresses.ts`:

```typescript
export const BASE_SEPOLIA_ADDRESSES = {
  PoolManager: '0x91B9463d0e4d99BB2D922cba2C9D4cd13c9a7C05',
  SwapRouter: '0xFf438e2d528F55fD1141382D1eB436201552d1A5',
  Quoter: '0x3e3D0d2cC349F42825B5cF58fd34d3bDFE25404b',
  PositionManager: '0xCf31fbdBD7A44ba1bCF99642E64a1d0B56a372bA',
  Permit2: '0x000000000022D473030F116dDEE9F6B43aC78BA3',
};
```

---

## Deployment Artifacts

Broadcast transactions saved to:
- `broadcast/DeploySimple.s.sol/84532/run-latest.json`
- `broadcast/DeployRemaining.s.sol/84532/run-latest.json`

---

**Status**: ✅ READY FOR TESTING

**Completion Marker**: ===TASK_COMPLETE:DEPLOY===
